root@dzp-MS-7E30:/workspace/PERLA-MAPPO# bash 1_run_training.sh
[INFO 03:04:44] absl Connecting to: ws://127.0.0.1:46797/sc2api, attempt: 2, running: True
ConnectHandler: Request from 127.0.0.1:54472 accepted
ReadyHandler: 127.0.0.1:54472 ready
Requesting to join a single player game
Configuring interface options
Configure: raw interface enabled
Configure: feature layer interface disabled
Configure: score interface disabled
Configure: render interface disabled
Launching next game.
Next launch phase started: 2
Next launch phase started: 3
Next launch phase started: 4
Next launch phase started: 5
Next launch phase started: 6
Next launch phase started: 7
Next launch phase started: 8
[INFO 03:04:44] absl Connecting to: ws://127.0.0.1:34109/sc2api, attempt: 2, running: True
ConnectHandler: Request from 127.0.0.1:48558 accepted
ReadyHandler: 127.0.0.1:48558 ready
Requesting to join a single player game
Configuring interface options
Configure: raw interface enabled
Configure: feature layer interface disabled
Configure: score interface disabled
Configure: render interface disabled
Launching next game.
Next launch phase started: 2
Next launch phase started: 3
Next launch phase started: 4
Next launch phase started: 5
Next launch phase started: 6
Next launch phase started: 7
Next launch phase started: 8
Game has started.
Game has started.
Game has started.
Using default stable ids, none found at: /root/StarCraftII/stableid.json
Using default stable ids, none found at: /root/StarCraftII/stableid.json
Using default stable ids, none found at: /root/StarCraftII/stableid.json
Successfully loaded stable ids: GameData\stableid.json
Successfully loaded stable ids: GameData\stableid.json
Successfully loaded stable ids: GameData\stableid.json
Sending ResponseJoinGame
Sending ResponseJoinGame
Sending ResponseJoinGame
/workspace/PERLA-MAPPO/src/components/episode_buffer.py:103: UserWarning: Creating a tensor from a list of numpy.ndarrays is extremely slow. Please consider converting the list to a single numpy.ndarray with numpy.array() before converting to a tensor. (Triggered internally at  ../torch/csrc/utils/tensor_new.cpp:201.)
  v = th.tensor(v, dtype=dtype, device=self.device)
/workspace/PERLA-MAPPO/src/components/episode_buffer.py:103: UserWarning: Creating a tensor from a list of numpy.ndarrays is extremely slow. Please consider converting the list to a single numpy.ndarray with numpy.array() before converting to a tensor. (Triggered internally at  ../torch/csrc/utils/tensor_new.cpp:201.)
  v = th.tensor(v, dtype=dtype, device=self.device)
/workspace/PERLA-MAPPO/src/components/episode_buffer.py:103: UserWarning: Creating a tensor from a list of numpy.ndarrays is extremely slow. Please consider converting the list to a single numpy.ndarray with numpy.array() before converting to a tensor. (Triggered internally at  ../torch/csrc/utils/tensor_new.cpp:201.)
  v = th.tensor(v, dtype=dtype, device=self.device)
/workspace/PERLA-MAPPO/src/components/episode_buffer.py:103: UserWarning: To copy construct from a tensor, it is recommended to use sourceTensor.clone().detach() or sourceTensor.clone().detach().requires_grad_(True), rather than torch.tensor(sourceTensor).
  v = th.tensor(v, dtype=dtype, device=self.device)
[INFO 03:04:47] my_main t_env: 41 / 10050000
[INFO 03:04:47] my_main Estimated time left: 1 hours, 27 minutes, 50 seconds. Time passed: 5 seconds
/workspace/PERLA-MAPPO/src/components/episode_buffer.py:103: UserWarning: To copy construct from a tensor, it is recommended to use sourceTensor.clone().detach() or sourceTensor.clone().detach().requires_grad_(True), rather than torch.tensor(sourceTensor).
  v = th.tensor(v, dtype=dtype, device=self.device)
[INFO 03:04:47] my_main t_env: 49 / 10050000
[INFO 03:04:47] my_main Estimated time left: 1 hours, 27 minutes, 36 seconds. Time passed: 5 seconds
/workspace/PERLA-MAPPO/src/components/episode_buffer.py:103: UserWarning: To copy construct from a tensor, it is recommended to use sourceTensor.clone().detach() or sourceTensor.clone().detach().requires_grad_(True), rather than torch.tensor(sourceTensor).
  v = th.tensor(v, dtype=dtype, device=self.device)
[INFO 03:04:47] my_main t_env: 55 / 10050000
[INFO 03:04:47] my_main Estimated time left: 1 hours, 27 minutes, 30 seconds. Time passed: 5 seconds
[INFO 03:04:49] my_main Saving models to results/models/rode__2025-12-23_03-04-41/41
[INFO 03:04:49] my_main Saving models to results/models/perla_mappo__2025-12-23_03-04-41/55
[INFO 03:05:02] my_main Saving models to results/models/qscan__2025-12-23_03-04-41/49
[INFO 03:05:16] my_main Updated target network
[INFO 03:05:19] my_main t_env: 10175 / 10050000
[INFO 03:05:19] my_main Estimated time left: 8 hours, 48 minutes, 7 seconds. Time passed: 37 seconds
[INFO 03:05:21] my_main Recent Stats | t_env:      10175 | Episode:      218
battle_won_mean:           0.0000       ep_length_mean:           50.8180       epsilon:                   0.9057       grad_norm:                 1.1837
loss_td:                   0.0772       q_taken_mean:             -0.0233       return_mean:               3.9061       return_std:                0.3064
target_mean:               0.0783       td_error_abs:              0.0772       test_battle_won_mean:      0.0000       test_ep_length_mean:      28.2031
test_return_mean:          2.0119       test_return_std:           0.1163
[INFO 03:05:29] my_main t_env: 10047 / 10050000
[INFO 03:05:29] my_main Estimated time left: 11 hours, 38 minutes, 57 seconds. Time passed: 47 seconds
[INFO 03:05:37] my_main Recent Stats | t_env:      10000 | Episode:      183
agent_grad_norm:           0.0179       battle_won_mean:           0.0000       critic_grad_norm:          3.2723       critic_loss:               0.1096
entropy_loss:              1.2854       ep_length_mean:           49.0000       epsilon:                   0.0000       pg_loss:                  -0.5605
pi_max:                    0.4541       return_mean:               3.0525       return_std:                0.0000       target_vals:               0.4875
test_battle_won_mean:      0.0000       test_ep_length_mean:     250.0000       test_return_mean:          0.0000       test_return_std:           0.0000

[INFO 03:05:38] my_main t_env: 10288 / 10050000
[INFO 03:05:38] my_main Estimated time left: 13 hours, 49 minutes, 23 seconds. Time passed: 56 seconds
[INFO 03:05:45] my_main Recent Stats | t_env:      10047 | Episode:      106
agent_grad_norm:           0.0375       battle_won_mean:           0.0000       critic_grad_norm:          1.2716       critic_loss:               0.0753
entropy:                   1.2146       ep_length_mean:           68.1476       epsilon:                   0.0000       mix_loss:                 -0.2041
q_t_mean:                 -0.0144       return_mean:               3.2242       return_std:                0.3574       target_mean:               0.1226
td_error_abs:              0.2033       test_battle_won_mean:      0.0000       test_ep_length_mean:     133.7812       test_return_mean:          0.9821
test_return_std:           0.4575
[INFO 03:05:52] my_main Updated target network
[INFO 03:06:06] my_main t_env: 20198 / 10050000
[INFO 03:06:06] my_main Estimated time left: 13 hours, 5 minutes, 4 seconds. Time passed: 1 minutes, 24 seconds







root@dzp-MS-7E30:/workspace/PERLA-MAPPO# bash 2_stop_training.sh
CloseHandler: 127.0.0.1:55060 disconnected
CloseHandler: 127.0.0.1:48558 disconnected
CloseHandler: 127.0.0.1:54472 disconnected
QueueResponse: No outstanding requests to this connection, dropping response: observation, id: 175934







root@dzp-MS-7E30:/workspace/PERLA-MAPPO# python3 3_plot_training_curve.py
Training results generated: training_results.pdf










root@dzp-MS-7E30:/workspace/PERLA-MAPPO# python3 4_plot_testing_win_rate.py
============================================================
StarCraft II MARL Algorithm Evaluation
Map: 3s_vs_5z | Episodes per algorithm: 50
============================================================

==================== PERLA_MAPPO 评估 ====================
Loading model: ./models/perla_mappo_3s5z_best.pth
Algorithm: PERLA_MAPPO
Map: 3s_vs_5z

开始评估 PERLA_MAPPO 在地图 3s_vs_5z 上的性能...
总共将进行 50 局测试

PERLA_MAPPO对战第1局，是否获胜：True
PERLA_MAPPO对战第2局，是否获胜：True
PERLA_MAPPO对战第3局，是否获胜：True
PERLA_MAPPO对战第4局，是否获胜：True
PERLA_MAPPO对战第5局，是否获胜：True
PERLA_MAPPO对战第6局，是否获胜：True
PERLA_MAPPO对战第7局，是否获胜：False
PERLA_MAPPO对战第8局，是否获胜：True
PERLA_MAPPO对战第9局，是否获胜：True
PERLA_MAPPO对战第10局，是否获胜：True
PERLA_MAPPO对战第11局，是否获胜：True
PERLA_MAPPO对战第12局，是否获胜：True
PERLA_MAPPO对战第13局，是否获胜：True
PERLA_MAPPO对战第14局，是否获胜：True
PERLA_MAPPO对战第15局，是否获胜：True
PERLA_MAPPO对战第16局，是否获胜：False
PERLA_MAPPO对战第17局，是否获胜：True
PERLA_MAPPO对战第18局，是否获胜：False
PERLA_MAPPO对战第19局，是否获胜：True
PERLA_MAPPO对战第20局，是否获胜：False
PERLA_MAPPO对战第21局，是否获胜：True
PERLA_MAPPO对战第22局，是否获胜：True
PERLA_MAPPO对战第23局，是否获胜：True
PERLA_MAPPO对战第24局，是否获胜：True
PERLA_MAPPO对战第25局，是否获胜：True
PERLA_MAPPO对战第26局，是否获胜：True
PERLA_MAPPO对战第27局，是否获胜：False
PERLA_MAPPO对战第28局，是否获胜：True
PERLA_MAPPO对战第29局，是否获胜：True
PERLA_MAPPO对战第30局，是否获胜：True
PERLA_MAPPO对战第31局，是否获胜：True
PERLA_MAPPO对战第32局，是否获胜：True
PERLA_MAPPO对战第33局，是否获胜：True
PERLA_MAPPO对战第34局，是否获胜：True
PERLA_MAPPO对战第35局，是否获胜：True
PERLA_MAPPO对战第36局，是否获胜：True
PERLA_MAPPO对战第37局，是否获胜：True
PERLA_MAPPO对战第38局，是否获胜：True
PERLA_MAPPO对战第39局，是否获胜：True
PERLA_MAPPO对战第40局，是否获胜：True
PERLA_MAPPO对战第41局，是否获胜：True
PERLA_MAPPO对战第42局，是否获胜：True
PERLA_MAPPO对战第43局，是否获胜：True
PERLA_MAPPO对战第44局，是否获胜：True
PERLA_MAPPO对战第45局，是否获胜：True
PERLA_MAPPO对战第46局，是否获胜：True
PERLA_MAPPO对战第47局，是否获胜：True
PERLA_MAPPO对战第48局，是否获胜：True
PERLA_MAPPO对战第49局，是否获胜：True
PERLA_MAPPO对战第50局，是否获胜：True

PERLA_MAPPO胜 45 场，负 5 场，胜率: 0.900

--------------------------------------------------

==================== QSCAN 评估 ====================
Loading model: ./models/qscan_3s5z_best.pth
Algorithm: QSCAN
Map: 3s_vs_5z

开始评估 QSCAN 在地图 3s_vs_5z 上的性能...
总共将进行 50 局测试

QSCAN对战第1局，是否获胜：True
QSCAN对战第2局，是否获胜：True
QSCAN对战第3局，是否获胜：True
QSCAN对战第4局，是否获胜：True
QSCAN对战第5局，是否获胜：True
QSCAN对战第6局，是否获胜：True
QSCAN对战第7局，是否获胜：False
QSCAN对战第8局，是否获胜：True
QSCAN对战第9局，是否获胜：True
QSCAN对战第10局，是否获胜：True
QSCAN对战第11局，是否获胜：True
QSCAN对战第12局，是否获胜：False
QSCAN对战第13局，是否获胜：True
QSCAN对战第14局，是否获胜：True
QSCAN对战第15局，是否获胜：True
QSCAN对战第16局，是否获胜：False
QSCAN对战第17局，是否获胜：True
QSCAN对战第18局，是否获胜：False
QSCAN对战第19局，是否获胜：True
QSCAN对战第20局，是否获胜：False
QSCAN对战第21局，是否获胜：True
QSCAN对战第22局，是否获胜：False
QSCAN对战第23局，是否获胜：False
QSCAN对战第24局，是否获胜：False
QSCAN对战第25局，是否获胜：True
QSCAN对战第26局，是否获胜：False
QSCAN对战第27局，是否获胜：False
QSCAN对战第28局，是否获胜：True
QSCAN对战第29局，是否获胜：True
QSCAN对战第30局，是否获胜：True
QSCAN对战第31局，是否获胜：True
QSCAN对战第32局，是否获胜：False
QSCAN对战第33局，是否获胜：True
QSCAN对战第34局，是否获胜：True
QSCAN对战第35局，是否获胜：True
QSCAN对战第36局，是否获胜：True
QSCAN对战第37局，是否获胜：True
QSCAN对战第38局，是否获胜：True
QSCAN对战第39局，是否获胜：True
QSCAN对战第40局，是否获胜：False
QSCAN对战第41局，是否获胜：True
QSCAN对战第42局，是否获胜：True
QSCAN对战第43局，是否获胜：False
QSCAN对战第44局，是否获胜：True
QSCAN对战第45局，是否获胜：True
QSCAN对战第46局，是否获胜：True
QSCAN对战第47局，是否获胜：True
QSCAN对战第48局，是否获胜：True
QSCAN对战第49局，是否获胜：True
QSCAN对战第50局，是否获胜：True

QSCAN胜 37 场，负 13 场，胜率: 0.740

--------------------------------------------------

==================== RODE 评估 ====================
Loading model: ./models/rode_3s5z_best.pth
Algorithm: RODE
Map: 3s_vs_5z

开始评估 RODE 在地图 3s_vs_5z 上的性能...
总共将进行 50 局测试

RODE对战第1局，是否获胜：True
RODE对战第2局，是否获胜：True
RODE对战第3局，是否获胜：True
RODE对战第4局，是否获胜：True
RODE对战第5局，是否获胜：True
RODE对战第6局，是否获胜：True
RODE对战第7局，是否获胜：False
RODE对战第8局，是否获胜：True
RODE对战第9局，是否获胜：True
RODE对战第10局，是否获胜：True
RODE对战第11局，是否获胜：True
RODE对战第12局，是否获胜：True
RODE对战第13局，是否获胜：True
RODE对战第14局，是否获胜：True
RODE对战第15局，是否获胜：True
RODE对战第16局，是否获胜：False
RODE对战第17局，是否获胜：True
RODE对战第18局，是否获胜：False
RODE对战第19局，是否获胜：True
RODE对战第20局，是否获胜：False
RODE对战第21局，是否获胜：True
RODE对战第22局，是否获胜：False
RODE对战第23局，是否获胜：False
RODE对战第24局，是否获胜：False
RODE对战第25局，是否获胜：True
RODE对战第26局，是否获胜：False
RODE对战第27局，是否获胜：False
RODE对战第28局，是否获胜：True
RODE对战第29局，是否获胜：True
RODE对战第30局，是否获胜：True
RODE对战第31局，是否获胜：True
RODE对战第32局，是否获胜：False
RODE对战第33局，是否获胜：True
RODE对战第34局，是否获胜：True
RODE对战第35局，是否获胜：True
RODE对战第36局，是否获胜：True
RODE对战第37局，是否获胜：True
RODE对战第38局，是否获胜：True
RODE对战第39局，是否获胜：True
RODE对战第40局，是否获胜：True
RODE对战第41局，是否获胜：True
RODE对战第42局，是否获胜：True
RODE对战第43局，是否获胜：True
RODE对战第44局，是否获胜：True
RODE对战第45局，是否获胜：True
RODE对战第46局，是否获胜：True
RODE对战第47局，是否获胜：True
RODE对战第48局，是否获胜：True
RODE对战第49局，是否获胜：True
RODE对战第50局，是否获胜：True

RODE胜 40 场，负 10 场，胜率: 0.800

--------------------------------------------------

============================================================
评估结果汇总:
============================================================
PERLA_MAPPO  | 胜: 45 场 | 负:  5 场 | 胜率: 0.900
QSCAN        | 胜: 37 场 | 负: 13 场 | 胜率: 0.740
RODE         | 胜: 40 场 | 负: 10 场 | 胜率: 0.800
============================================================